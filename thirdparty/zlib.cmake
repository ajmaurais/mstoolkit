
include(ExternalProject)

set(ZLIB_PREFIX zlib-1.2.11)

set(ZLIB_URL ${CMAKE_CURRENT_SOURCE_DIR}/thirdparty/zlib1211.zip)

set(ZLIB_URL_MD5 16b41357b2cd81bca5e1947238e64465)

set(ZLIB_SRC_BASE ${CMAKE_CURRENT_BINARY_DIR}/${ZLIB_PREFIX}) 

ExternalProject_Add(${ZLIB_PREFIX}
		PREFIX ${ZLIB_PREFIX}
        URL ${ZLIB_URL}
		URL_MD5 ${ZLIB_URL_MD5}
		# SOURCE_DIR ${ZLIB_SRC_BASE}
		BUILD_IN_SOURCE 1
		LOG_DOWNLOAD 0
		LOG_BUILD 0
		CONFIGURE_COMMAND ${ZLIB_SRC_BASE}/src/${ZLIB_PREFIX}/configure --prefix=${CMAKE_CURRENT_BINARY_DIR} --includedir ${CMAKE_CURRENT_BINARY_DIR}/include --libdir ${CMAKE_CURRENT_BINARY_DIR}/lib 
		BUILD_COMMAND make install	
		# STAMP_DIR ${ZLIB_SRC_BASE}/log
)

set(${ZLIB_PREFIX}_LIBRARY ${CMAKE_CURRENT_SOURCE_DIR}/lib/${CMAKE_STATIC_LIBRARY_PREFIX}z${CMAKE_STATIC_LIBRARY_SUFFIX})
set(${ZLIB_PREFIX}_INCLUDE ${CMAKE_CURRENT_SOURCE_DIR}/include)

ExternalProject_Get_Property(${TBB_PREFIX} SOURCE_DIR)
message(STATUS "Source directory of ${TBB_PREFIX} ${SOURCE_DIR}")

